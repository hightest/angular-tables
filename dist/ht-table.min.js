/*!
 * ht-table
 * https://github.com/hightest/angular-table
 * Version: 0.0.1 - 2015-05-18T14:12:56.718Z
 * License: 
 */
!function(){function e(){function e(e,t,n,a){function l(){n.when(e.data).then(function(e){W=e,r()})}function i(){var t={activeStyle:"active",showFilters:!0,pagination:{total:0,current:1,itemsPerPage:10,show:!0},filters:[],selectFilters:[],sorting:[],selectMultiple:!1,expanded:null,expand:!1,onClick:function(){}};N=angular.merge({},t,e.settings),N.expanded=e.settings.expanded,I.data=[],I.fieldFilter={visible:!0},I.pagination=N.pagination,I.filters=N.filters,I.filterFields=[{name:"Wszędzie",field:"$"}].concat(N.fields),I.selectFilters=N.selectFilters,I.expanded=N.expanded,f()}function r(){o(),null!==N.expanded&&n.when(N.expanded).then(function(e){I.expanded=e,g(e)})}function o(){D(),h(),N.pagination.current=1,s()}function s(){h(),u()}function u(){v()}function d(e){N.selectMultiple||(K&&(K.$htTable.selected=!1),K=e,e.$htTable||(e.$htTable={}),e.$htTable.selected=!0),N.expand&&(I.expanded=I.expanded==e?null:e,N.onClick(e))}function g(e){for(var t=L.length,n=0,a=0;t>a;a++)if(angular.equals(L[a],e)){n=a;break}I.expanded=L[a],N.pagination.current=parseInt(n/N.pagination.itemsPerPage)+1,u()}function f(){for(var e=0,t=N.fields.length;t>e;e++){var n=N.fields[e];(angular.isUndefined(n.visible)||n.visible)&&(n.visible=!0)}I.fields=N.fields}function c(){var e=1;return N.selectMultiple&&e++,e+=t("field")(I.fields).length}function p(){return N.showFilters}function b(){return N.selectMultiple}function h(){for(var e=[],n=0,a=N.sorting.length;a>n;n++){var l=N.sorting[n],i="";i="asc"==l.sort?"+":"-",i+=l.field,e.push(i)}L=N.sorting.length?t("natural")(H,e):H}function v(){var e=N.pagination;e.total=L.length,I.data=e.itemsPerPage?L.slice((e.current-1)*e.itemsPerPage,e.current*e.itemsPerPage):L}function m(){var e=N.pagination;return!(!e.show||e.total<=10)}function T(){u()}function y(){return(N.pagination.current-1)*N.pagination.itemsPerPage}function P(e){return angular.isDefined(e.$htTable)&&e.$htTable.selected?N.activeStyle:""}function x(){for(var e=0,t=I.fields.length;t>e;e++)if(angular.isDefined(I.fields[e].type)&&"sum"==I.fields[e].type)return!0;return!1}function w(e){for(var t=0,n=H.length,a=0;n>a;a++){var l=H[a];angular.isDefined(l.$htTable)&&l.$htTable.selected&&(t+=l[e])}return t}function $(e,n){if(!angular.isUndefined(e.field)){for(var a=e.field,l=a.split("."),i=n,r=0,o=l.length;o>r;r++){var s=l[r];if(null===i||!i.hasOwnProperty(s))return"";i=i[s]}return angular.isDefined(e.filter)&&(i=t(e.filter)(i)),i}}function k(e,t){var n=t.shiftKey,a=F(e),l={};if(l=null===a?{field:e.field,sort:"asc"}:N.sorting[a],null!==a){var i=l.sort;"asc"==i?(N.sorting[a].sort="desc",n||(N.sorting=[N.sorting[a]])):n?N.sorting.splice(a,1):N.sorting.length=0}else n?N.sorting.push(l):(N.sorting.length=0,N.sorting.push(l));s()}function F(e){for(var t=0;t<N.sorting.length;t++)if(N.sorting[t].field==e.field)return t;return null}function S(e){for(var t=0;t<N.sorting.length;t++)if(e.field==N.sorting[t].field)return"asc"==N.sorting[t].sort?"ht-table-icon-up":"ht-table-icon-down";return""}function M(){I.filters.push({filter:I.filterTypes[0].value,field:"$",value:""})}function A(e){var t=I.filters[e].value;I.filters.splice(e,1),t.length>0&&C()}function C(){R&&a.cancel(R),R=a(o,500)}function D(){var e=W,n=q(I.filters);n=E(n);for(var a in n)if(n.hasOwnProperty(a)){var l=n[a];if(l=O(l),1===l.length)if(l[0]=j(l[0]),"filter"==a&&angular.isDefined(l[0].$)&&l[0].$.length)for(var i=l[0].$,r=i.split(" "),o=0;o<r.length;o++)l[0].$=r[o],e=t(a)(e,l[0]);else e=t(a)(e,l[0]);else{for(var s=[],u=l.length,d=0;u>d;d++){var g=e.slice();if("filter"==a&&angular.isDefined(l[d].$)&&l[d].$.length)for(var f=l[d].$,c=f.split(" "),p=0;p<c.length;p++)l[d].$=c[p],g=t(a)(g,l[d]);else g=t(a)(g,l[d]);s=s.concat(g)}for(d=0;d<s.length;d++)for(var b=d+1;b<s.length;b++)s[d]==s[b]&&s.splice(b--,1);e=s}}H=e}function q(e){for(var t={},n=e.length,a=0;n>a;++a){var l=e[a];l.value.length&&(angular.isUndefined(t[l.filter])&&(t[l.filter]={}),angular.isDefined(t[l.filter][l.field])?(Array.isArray(t[l.filter][l.field])||(t[l.filter][l.field]=[t[l.filter][l.field]]),t[l.filter][l.field].push(l.value)):t[l.filter][l.field]=l.value)}return t}function E(e){for(var t=N.selectFilters,n=t.length,a=0;n>a;++a)for(var l=t[a],i=l.options.length,r=0;i>r;++r){var o=l.options[r];if(angular.isDefined(o.selected)&&o.selected){var s=o.type,u=o.field,d=o.value;angular.isDefined(e[s])||(e[s]={}),angular.isDefined(e[s][u])&&(e[s][u].length>0||angular.isNumber(e[s][u]))?(Array.isArray(e[s][u])||(e[s][u]=[e[s][u]]),e[s][u].push(d)):e[s][u]=d}}return e}function O(e){var t=[];return angular.forEach(e,function(n,a){Array.isArray(n)&&angular.forEach(n,function(n){var l=angular.copy(e);l[a]=n,t=t.concat(O(l))})}),0===t.length&&t.push(e),t}function U(e,t,n,a){var l=e.indexOf(".");if(-1===l)a?("undefined"==typeof n[a]&&(n[a]={}),n[a][e]=t):n[e]=t;else{var i=e.split(".",1)[0],r=e.substr(l+1);a&&("undefined"==typeof n[a]&&(n[a]={}),n=n[a]),U(r,t,n,i)}}function j(e){for(var t={},n=Object.keys(e),a=0,l=n.length;l>a;a++)U(n[a],e[n[a]],t);return t}function z(){for(var e=W,t=e.length,n=[],a=0;t>a;a++){for(var l=[],i=0;i<I.fields.length;i++){var r=I.fields[i];r.visible&&!angular.isUndefined(r.field)&&l.push($(r,e[a]))}n.push(l)}return n}function V(){for(var e=[],t=0;t<I.fields.length;t++){var n=I.fields[t];n.visible&&!angular.isUndefined(n.field)&&e.push(n.name)}return e}var N,I=this,W=[],H=[],L=[];e.$watch("data",function(e,t){e!==t&&l()}),I.filterTypes=[{name:"Szukaj w",value:"filter"},{name:"Mniejszy od",value:"lessThanOrEqualTo"},{name:"Większy od",value:"greaterThanOrEqualTo"}],I.getIndex=y,I.rowStyle=P,I.getValue=$,I.changeSorting=k,I.getFieldClass=S,I.showPagination=m,I.updatePagination=T,I.selectMultiple=b,I.showFilters=p,I.addFilter=M,I.removeFilter=A,I.updateFilter=C,I.export=z,I.exportHeader=V,I.expand=d,I.hasSum=x,I.sum=w,I.sums={},I.countColumns=c;var K=null;n.when(e.data).then(function(e){W=e,r()}),l(),i();var R=null}return e.$inject=["$scope","$filter","$q","$timeout"],{templateUrl:"ht-table/layout.html",require:"^ngModel",scope:{settings:"=htTable",data:"=ngModel"},controllerAs:"htTable",controller:e}}function t(){return function(e,t){t[0].focus()}}function n(){return function(e){for(var t=[],n=e.length,a=0;n>a;a++)(angular.isUndefined(e[a].visible)||e[a].visible)&&t.push(e[a]);return t}}function a(e){return function(t,n){return e(t,n,function(e,t){var n=function(e){return!isNaN(parseFloat(e))};return n(e)&&n(t)?e>=t:!1})}}function l(e){return function(t,n){return e(t,n,function(e,t){var n=function(e){return!isNaN(parseFloat(e))};return n(e)&&n(t)?t>=e:!1})}}function i(e,t){function n(e){if("function"==typeof e)e=!0;else if(e&&0!==e.length){var t=angular.lowercase(""+e);e=!("f"==t||"0"==t||"false"==t||"no"==t||"n"==t||"[]"==t)}else e=!1;return e}function a(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function l(e,t,n){var a=[];return angular.forEach(e,function(e,l,i){a.push(t.call(n,e,l,i))}),a}function i(e){if(null===e||a(e))return!1;var t=e.length;return 1===e.nodeType&&t?!0:angular.isString(e)||angular.isArray(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}var r=[].slice;return function(a,o,s){function u(e,t){for(var n=0;n<o.length;n++){var a=o[n](e,t);if(0!==a)return a}return 0}function d(e,t){return n(t)?function(t,n){return e(n,t)}:e}function g(e,n){var a=typeof e,l=typeof n;return a==l?(angular.isDate(e)&&angular.isDate(n)&&(e=e.valueOf(),n=n.valueOf()),"string"==a&&(e=t.naturalValue(e.toLowerCase()),n=t.naturalValue(n.toLowerCase())),e===n?0:n>e?-1:1):l>a?-1:1}return i(a)?(o=angular.isArray(o)?o:[o],0===o.length&&(o=["+"]),o=l(o,function(t){var n=!1,a=t||identity;if(angular.isString(t)){if(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),""===t)return d(function(e,t){return g(e,t)},n);if(a=e(t),a.constant){var l=a();return d(function(e,t){return g(e[l],t[l])},n)}}return d(function(e,t){return g(a(e),a(t))},n)}),r.call(a).sort(d(u,s))):a}}a.$inject=["filterFilter"],l.$inject=["filterFilter"],i.$inject=["$parse","naturalService"],angular.module("ht.tables",["ui.bootstrap","naturalSort","ngSanitize","ngCsv"]).directive("htTable",e).directive("htFocus",t).filter("greaterThanOrEqualTo",a).filter("lessThanOrEqualTo",l).filter("natural",i).filter("field",n)}(),/*!
 * Copyright 2013 Phil DeJarnett - http://www.overzealous.com
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
angular.module("naturalSort",[]).factory("naturalService",["$locale",function(e){"use strict";var t={},n=function(e){return"00000000000000000000".slice(e.length)},a=function(e){return null===e||void 0===e?"":""+e},l="M"===e.DATETIME_FORMATS.shortDate.charAt(0),i=function(e){return a(e).replace(/(\d\d?)[-\/\.](\d\d?)[-\/\.](\d{4})/,function(e,t,n,a){var i=n;return l?Number(t)>12&&(n=t,t=i):Number(n)<13&&(n=t,t=i),a+"-"+t+"-"+n})},r=function(e){return e.replace(/(\d+)((\.\d+)+)?/g,function(e,t,a,l){return a!==l?e.replace(/(\d+)/g,function(e){return n(e)+e}):(a=a||".0",n(t)+t+a+n(a))})},o=function(e){return t[e]?t[e]:(t[e]=r(i(e)),t[e])};return{naturalValue:o,naturalSort:function(e,t){return e=natVale(e),t=o(t),t>e?-1:e>t?1:0}}}]).run(["$rootScope","naturalService",function(e,t){"use strict";e.natural=function(e){return function(n){return t.naturalValue(n[e])}}}]),angular.module("ht.tables").run(["$templateCache",function(e){e.put("ht-table/checkbox.html",'<input type="checkbox" ng-model="row.$htTable.selected" ng-change="table.checkedChange()">'),e.put("ht-table/filters.html",'<div class="form-inline" ng-repeat="filter in htTable.filters"><div class="form-group"><select class="form-control" ng-model="filter.filter" ng-change="htTable.updateFilter()" ng-options="filterType.value as filterType.name for filterType in htTable.filterTypes"></select></div><div class="form-group"><select class="form-control" ng-model="filter.field" ng-change="htTable.updateFilter()" ng-options="field.field as field.name for field in htTable.filterFields"></select></div><div class="form-group"><input class="form-control" ng-change="htTable.updateFilter()" type="text" ng-model="filter.value" ht-focus=""></div><div class="form-group"><span class="glyphicon glyphicon-remove-circle" ng-click="htTable.removeFilter($index)"></span></div></div><button type="button" class="btn btn-default" ng-click="htTable.addFilter()">Dodaj filtr</button><h4 ng-repeat-start="field in htTable.selectFilters">{{field.name}}</h4><div class="btn-group" ng-repeat-end=""><label ng-repeat="option in field.options" class="btn btn-success" ng-change="htTable.updateFilter()" ng-model="option.selected" btn-radio="1" btn-checkbox="">{{option.name}}</label></div>'),e.put("ht-table/header.html",'<tr><th><div dropdown="" class="btn-group"><button class="btn btn-default dropdown-toggle" type="button" dropdown-toggle=""><span class="glyphicon glyphicon-cog" aria-hidden="true"></span></button><ul class="dropdown-menu" role="menu" ng-click="$event.stopPropagation()"><li ng-repeat="field in htTable.fields"><label><input type="checkbox" ng-model="field.visible">{{field.name}}</label></li><button class="btn btn-primary" ng-csv="htTable.export()" csv-header="htTable.exportHeader()" filename="export.csv">Eksportuj</button></ul></div></th><th ng-if="htTable.selectMultiple()"></th><th ng-repeat="field in htTable.fields | field" ng-click="htTable.changeSorting(field, $event)" ng-class="htTable.getFieldClass(field)" style="cursor:pointer">{{field.name}}</th></tr>'),e.put("ht-table/ht-table.html",'<div class="table-responsive"><table class="table table-bordered" id="{{table.id}}" ng-class="table.class"><thead><tr><th><div dropdown="" class="btn-group"><button class="btn btn-default dropdown-toggle" type="button" dropdown-toggle=""><span class="glyphicon glyphicon-cog" aria-hidden="true"></span></button><ul class="dropdown-menu" role="menu" ng-click="$event.stopPropagation()"><li ng-repeat="field in table.fields" ng-if="!table.isTemplate(field)"><label><input type="checkbox" ng-model="field.visible">{{field.name}}</label></li><button class="btn btn-primary" ng-csv="table.export()" csv-header="table.exportHeader()" filename="export.csv">Eksportuj</button></ul></div></th><th ng-if="table.selectMultiple"></th><th ng-repeat="field in table.fields" ng-if="field.visible" ng-click="table.changeSorting(field, $event)" ng-class="table.getFieldClass(field)" style="cursor:pointer">{{field.name}}</th></tr></thead><tbody><tr ng-repeat-start="row in table.data" ng-class="table.rowStyle(row)"><td>{{(table.pagination.current - 1) * table.pagination.itemsPerPage + $index + 1}}.</td><th scope="row" ng-if="table.selectMultiple"><input type="checkbox" ng-model="row.checked" ng-change="table.checkedChange()"></th><td ng-repeat="field in table.fields" ng-if="field.visible" ng-click="table.expand(row)"><div ng-if="!table.isTemplate(field)">{{table.getValue(field, row)}}</div><div ng-if="table.isTemplate(field)" ng-click="$event.stopPropagation()" ng-include="field.templateUrl"></div></td></tr><tr ng-repeat-end="" ng-if="table.show(row)"><td colspan="{{table.countColumns()}}"><div ui-view=""></div></td></tr></tbody><tfoot ng-if="table.hasSum()"><tr><td>&nbsp;</td><td ng-if="table.selectMultiple">&nbsp;</td><td ng-repeat="field in table.fields" ng-if="field.visible"><span ng-if="field.type == \'sum\'">Suma: {{table.sum(field.value) | number:2}}</span></td></tr></tfoot></table></div><div class="row"><div class="col-xs-6" ng-if="table.pages() > 1"><pagination total-items="table.pagination.total" ng-model="table.pagination.current" ng-change="table.pageChanged()" max-size="5" items-per-page="table.pagination.itemsPerPage" previous-text="&laquo;" next-text="&raquo;"></pagination></div><div class="btn-group col-xs-6" ng-if="table.pagination.total > 10"><label class="btn btn-primary" ng-model="table.pagination.itemsPerPage" ng-change="table.updatePagination()" btn-radio="10">10</label> <label class="btn btn-primary" ng-model="table.pagination.itemsPerPage" ng-change="table.updatePagination()" btn-radio="25">25</label> <label class="btn btn-primary" ng-if="table.pagination.total > 25" ng-change="table.updatePagination()" ng-model="table.pagination.itemsPerPage" btn-radio="50">50</label> <label class="btn btn-primary" ng-if="table.pagination.total > 50" ng-change="table.updatePagination()" ng-model="table.pagination.itemsPerPage" btn-radio="100">100</label> <label class="btn btn-primary" ng-model="table.pagination.itemsPerPage" ng-change="table.updatePagination()" btn-radio="0">Wszystkie</label></div></div>'),e.put("ht-table/layout.html",'<div id="ng-table"><div ng-if="htTable.showFilters()" ng-include="\'ht-table/filters.html\'"></div><h4 ng-repeat-start="field in filter.select">{{field.name}}</h4><div class="btn-group" ng-repeat-end=""><label ng-repeat="option in field.options" class="btn btn-success" ng-change="filter.update()" ng-model="option.selected" btn-radio="1" btn-checkbox="">{{option.name}}</label></div><div ng-include="\'ht-table/table.html\'"></div></div>'),e.put("ht-table/pagination.html",'<div class="col-xs-6"><pagination boundary-links="true" ng-if="htTable.pagination.itemsPerPage <= htTable.pagination.total && htTable.pagination.itemsPerPage != 0" total-items="htTable.pagination.total" ng-model="htTable.pagination.current" ng-change="htTable.updatePagination()" max-size="5" items-per-page="htTable.pagination.itemsPerPage" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div><div class="btn-group col-xs-6" ng-if="htTable.pagination.total > 10"><label class="btn btn-primary" ng-model="htTable.pagination.itemsPerPage" ng-change="htTable.updatePagination()" btn-radio="2">10</label> <label class="btn btn-primary" ng-model="htTable.pagination.itemsPerPage" ng-change="htTable.updatePagination()" btn-radio="25">25</label> <label class="btn btn-primary" ng-if="htTable.pagination.total > 25" ng-change="htTable.updatePagination()" ng-model="htTable.pagination.itemsPerPage" btn-radio="50">50</label> <label class="btn btn-primary" ng-if="htTable.pagination.total > 50" ng-change="htTable.updatePagination()" ng-model="htTable.pagination.itemsPerPage" btn-radio="100">100</label> <label class="btn btn-primary" ng-model="htTable.pagination.itemsPerPage" ng-change="htTable.updatePagination()" btn-radio="0">Wszystkie</label></div>'),e.put("ht-table/table.html",'<div class="table-responsive"><table class="table table-bordered" id="{{htTable.settings.id}}" ng-class="table.class"><thead ng-include="\'ht-table/header.html\'"></thead><tbody><tr ng-repeat-start="row in htTable.data" ng-class="htTable.rowStyle(row)"><td>{{ htTable.getIndex() + $index + 1 }}.</td><th scope="row" ng-if="htTable.selectMultiple()" ng-include="\'ht-table/checkbox.html\'"></th><td ng-repeat="field in htTable.fields | field" ng-click="htTable.expand(row)"><div ng-if="!field.templateUrl">{{htTable.getValue(field, row)}}</div><div ng-if="field.templateUrl" ng-click="$event.stopPropagation()" ng-include="field.templateUrl"></div></td></tr><tr ng-repeat-end="" ng-if="htTable.expanded == row"><td colspan="{{htTable.countColumns()}}"><div ui-view=""></div></td></tr></tbody><tfoot ng-if="htTable.hasSum()"><tr><td>&nbsp;</td><td ng-if="htTable.selectMultiple()">&nbsp;</td><td ng-repeat="field in htTable.fields | field"><span ng-if="field.type == \'sum\'">Suma: {{htTable.sum(field.field) | number:2}}</span></td></tr></tfoot></table></div><div class="row" ng-include="\'ht-table/pagination.html\'" ng-if="htTable.showPagination()"></div>')}]);