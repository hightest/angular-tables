/*!
 * ht-table
 * https://github.com/hightest/angular-table
 * Version: 0.0.1 - 2016-07-26T12:47:23.813Z
 * License: 
 */
!function(){function e(){function e(e,t,n,l){function a(){var e=angular.copy(document);e.getElementsByClassName("option-group-table")[0].remove();var t=e.getElementsByClassName("option-pagination"),n=e.getElementsByClassName("option-footer"),l=e.getElementsByClassName("option-expand");t.length>0&&t[0].remove(),n.length>0&&n[0].remove(),l.length>0&&l[0].remove();var a='<meta http-equiv="content-type" content="application/vnd.ms-excel; charset=UTF-8">',i=e.getElementById("exportable"+_.id).innerHTML,r=new Blob([a+i],{type:"data:application/vnd.ms-excel;charset=UTF-8"});saveAs(r,"Tabela.xls")}function i(){n.when(e.data).then(function(e){J=e,o()})}function r(){var t={activeStyle:"active",showFilters:!0,pagination:{total:0,current:1,itemsPerPage:10,show:!0},filters:[],selectFilters:[],sorting:[],selectMultiple:!1,expanded:null,expand:!1,onClick:function(){}};G.customScope=e.settings.customScope,e.settings.customScope=null,_=angular.merge({},t,e.settings),_.expanded=e.settings.expanded,G.data=[],G.fieldFilter={visible:!0},G.pagination=_.pagination,G.filters=e.settings.filters?e.settings.filters:[],_.sorting=e.settings.sorting?e.settings.sorting:[],G.filterFields=[{name:"Wszędzie",field:"$"}].concat(_.fields),_.fields=e.settings.fields,G.selectFilters=_.selectFilters,_.selectFilters=e.settings.selectFilters,G.selectFilters=e.settings.selectFilters,G.expanded=_.expanded,_.comparator=_.comparator||b,G.settings=_,v()}function o(){_.expanded=e.settings.expanded,s(),d(),null!==_.expanded&&n.when(_.expanded).then(function(e){G.expanded=e,h(e)})}function s(){var e=f(),t=e.length;if(t)for(var n=J.length,l=0;n>l;l++){var a=J[l];u(a,e)}}function u(e,t){var n=t.length;angular.isDefined(e.$htTable)||(e.$htTable={});for(var l=0;n>l;l++)e.$htTable["field"+t[l].index]=t[l].value(e)}function f(){for(var e=G.fields.length,t=[],n=0;e>n;n++){var l=G.fields[n];angular.isDefined(l.value)&&(l.index=n,l.field="$htTable.field"+n,t.push(l))}return t}function d(){z(),x(),c()}function c(){x(),g()}function g(){$()}function p(e){_.onClick(e),_.selectMultiple||(Z&&(Z.$htTable.selected=!1),Z=e,e.$htTable||(e.$htTable={}),e.$htTable.selected=!0),_.expand&&(G.expanded=G.expanded==e?null:e)}function h(e){for(var t=Y.length,n=0,l=0;t>l;l++)if(_.comparator(Y[l],e)){n=l;break}G.expanded=Y[l],_.pagination.current=parseInt(n/_.pagination.itemsPerPage)+1,g()}function b(e,t){return angular.equals(e,t)}function v(){for(var e=0,t=_.fields.length;t>e;e++){var n=_.fields[e];(angular.isUndefined(n.visible)||n.visible)&&(n.visible=!0)}G.fields=_.fields}function m(){var e=1;return _.selectMultiple&&e++,e+=t("field")(G.fields).length}function T(){return _.showFilters}function y(){return _.selectMultiple}function x(){for(var e=[],n=0,l=_.sorting.length;l>n;n++){var a=_.sorting[n],i="";i="asc"==a.sort?"+":"-",i+=a.field,e.push(i)}Y=_.sorting.length?t("natural")(Q,e):Q}function $(){var e=_.pagination;if(e.total=Y.length,G.data=e.itemsPerPage?Y.slice((e.current-1)*e.itemsPerPage,e.current*e.itemsPerPage):Y,_.selectMultiple){G.allSelected=!0;for(var t=0,n=G.data.length;n>t;t++)if(!G.data[t].$htTable||G.data[t].$htTable.selected!==!0){G.allSelected=!1;break}}}function w(){var e=_.pagination;return!(!e.show||e.total<=10)}function F(){g()}function P(){return(_.pagination.current-1)*_.pagination.itemsPerPage}function S(e){return angular.isDefined(e.$htTable)&&e.$htTable.selected||e===G.expanded?_.activeStyle:""}function k(){for(var e=0,t=G.fields.length;t>e;e++)if(angular.isDefined(G.fields[e].type))if(angular.isArray(G.fields[e].type)){for(var n=0;n<G.fields[e].type.length;n++)if(-1!==et.indexOf(G.fields[e].type[n]))return!0}else if(-1!==et.indexOf(G.fields[e].type))return!0;return!1}function M(e){for(var t=0,n=Q.length,l=0,a=!0,i=0;n>i;i++){var r=Q[i];l+=parseFloat(O(e,r,!0)),angular.isDefined(r.$htTable)&&r.$htTable.selected&&G.selectMultiple()&&(t+=parseFloat(O(e,r,!0)),a=!1)}return angular.isDefined(e.filter)&&(t=A(e.filter,t),l=A(e.filter,l)),a?l:t}function D(e){for(var t=0,n=Q.length,l=0,a=0,i=!0,r=0;n>r;r++){var o=Q[r];a+=parseFloat(O(e,o,!0)),angular.isDefined(o.$htTable)&&o.$htTable.selected&&G.selectMultiple()&&(t+=parseFloat(O(e,o,!0)),l++,i=!1)}return t=Math.round(t/l),a=Math.round(a/n),angular.isDefined(e.filter)&&(t=A(e.filter,t),a=A(e.filter,a)),i?a:t}function O(e,t,n){if(!angular.isUndefined(e.field)){for(var l=e.field,a=l.split("."),i=t,r=0,o=a.length;o>r;r++){var s=a[r];if(null===i||!i.hasOwnProperty(s))return"";i=i[s]}return angular.isDefined(e.filter)&&!n&&(i=A(e.filter,i)),i}}function A(e,n){var l=e.split(":");return 2==l.length?t(l[0])(n,l[1]):t(l[0])(n)}function E(e,t){var n=t.shiftKey,l=C(e),a={};if(a=null===l?{field:e.field,sort:"asc"}:_.sorting[l],null!==l){var i=a.sort;if("asc"==i){if(_.sorting[l].sort="desc",!n){var r=_.sorting[l];_.sorting.length=0,_.sorting.push(r)}}else n?_.sorting.splice(l,1):_.sorting.length=0}else n?_.sorting.push(a):(_.sorting.length=0,_.sorting.push(a))}function C(e){for(var t=0;t<_.sorting.length;t++)if(_.sorting[t].field==e.field)return t;return null}function U(e){for(var t=0;t<_.sorting.length;t++)if(e.field==_.sorting[t].field)return"asc"==_.sorting[t].sort?"ht-table-icon-up":"ht-table-icon-down";return""}function j(){G.filters.push({filter:G.filterTypes[0].value,field:"$",value:""})}function q(e){var t=G.filters[e].value;G.filters.splice(e,1),t.length>0&&N()}function N(){tt&&l.cancel(tt),tt=l(function(){d(),_.pagination.current=1},500)}function z(){var e=J,n=V(G.filters);n=B(n);for(var l in n)if(n.hasOwnProperty(l)){var a=n[l];if(a=L(a),1===a.length)if(a[0]=H(a[0]),"filter"==l&&angular.isDefined(a[0].$)&&a[0].$.length)for(var i=a[0].$,r=i.split(" "),o=0;o<r.length;o++)a[0].$=r[o],e=t(l)(e,a[0]);else e=t(l)(e,a[0]);else{for(var s=[],u=a.length,f=0;u>f;f++){var d=e.slice();if(a[f]=H(a[f]),"filter"==l&&angular.isDefined(a[f].$)&&a[f].$.length)for(var c=a[f].$,g=c.split(" "),p=0;p<g.length;p++)a[f].$=g[p],d=t(l)(d,a[f]);else d=t(l)(d,a[f]);s=s.concat(d)}for(f=0;f<s.length;f++)for(var h=f+1;h<s.length;h++)s[f]==s[h]&&s.splice(h--,1);e=s}}Q=I(e)}function V(e){for(var t={},n=e.length,l=0;n>l;++l){var a=e[l];a.value.length&&(angular.isUndefined(t[a.filter])&&(t[a.filter]={}),angular.isDefined(t[a.filter][a.field])?(Array.isArray(t[a.filter][a.field])||(t[a.filter][a.field]=[t[a.filter][a.field]]),t[a.filter][a.field].push(a.value)):t[a.filter][a.field]=a.value)}return t}function I(e){var t=_.selectFilters;angular.isUndefined(_.selectFilters)&&(t=[]);for(var n=e.slice(),l=0,a=t.length;a>l;l++){for(var i=t[l],r=[],o=!1,s=0,u=i.options.length;u>s;s++){var f=i.options[s];if(f.selected&&angular.isFunction(f.field)){o=!0;for(var d=0,c=n.length;c>d;d++){var g=n[d],p=f.field(g);-1!==p.indexOf(f.value)&&-1===r.indexOf(g)&&r.push(g)}}}o&&(n=r)}return n}function B(e){var t=_.selectFilters;angular.isUndefined(_.selectFilters)&&(t=[]);for(var n=t.length,l=0;n>l;++l)for(var a=t[l],i=a.options.length,r=0;i>r;++r){var o=a.options[r];if(angular.isDefined(o.selected)&&o.selected){if(angular.isFunction(o.field))continue;var s=o.type,u=o.field,f=o.value;angular.isDefined(e[s])||(e[s]={}),angular.isDefined(e[s][u])&&(e[s][u].length>0||angular.isNumber(e[s][u]))?(Array.isArray(e[s][u])||(e[s][u]=[e[s][u]]),e[s][u].push(f)):e[s][u]=f}}return e}function L(e){var t=[];return angular.forEach(e,function(n,l){Array.isArray(n)&&angular.forEach(n,function(n){var a=angular.copy(e);a[l]=n,t=t.concat(L(a))})}),0===t.length&&t.push(e),t}function W(e,t,n,l){var a=e.indexOf(".");if(-1===a)l?("undefined"==typeof n[l]&&(n[l]={}),n[l][e]=t):n[e]=t;else{var i=e.split(".",1)[0],r=e.substr(a+1);l&&("undefined"==typeof n[l]&&(n[l]={}),n=n[l]),W(r,t,n,i)}}function H(e){for(var t={},n=Object.keys(e),l=0,a=n.length;a>l;l++)W(n[l],e[n[l]],t);return t}function K(){for(var e=J,t=e.length,n=[],l=[],a=0;t>a;a++){for(var i=[],r=0;r<G.fields.length;r++){var o=G.fields[r];o.visible&&!angular.isUndefined(o.field)&&i.push(O(o,e[a]))}e[a].$htTable&&e[a].$htTable.selected&&l.push(i),n.push(i)}return l.length?l:n}function R(){for(var e=[],t=0;t<G.fields.length;t++){var n=G.fields[t];n.visible&&!angular.isUndefined(n.field)&&e.push(n.name)}return e}function X(){for(var e=0,t=G.data.length;t>e;e++)G.data[e].$htTable||(G.data[e].$htTable={}),G.data[e].$htTable.selected=G.allSelected}var _,G=this,J=[],Q=[],Y=[];e.$watchCollection("data",function(){i()}),G.filterTypes=[{name:"Szukaj w",value:"filter"},{name:"Szukaj dokładnie w",value:"exact"},{name:"Mniejszy od",value:"lessThanOrEqualTo"},{name:"Większy od",value:"greaterThanOrEqualTo"}],G.getIndex=P,G.rowStyle=S,G.getValue=O,G.changeSorting=E,G.getFieldClass=U,G.showPagination=w,G.updatePagination=F,G.selectMultiple=y,G.showFilters=T,G.addFilter=j,G.removeFilter=q,G.updateFilter=N,G.export=K,G.exportHeader=R,G.expand=p,G.hasSum=k,G.sum=M,G.sums={},G.countColumns=m,G.allSelected=!1,G.selectAll=X,G.avg=D,G.exportToExcel=a;var Z=null;n.when(e.data).then(function(e){J=e,o()}),i(),r(),e.$watch(function(){return e.settings.fields.length},function(){G.filterFields=[{name:"Wszędzie",field:"$"}].concat(e.settings.fields)}),G.isNumber=function(e){var t=["currency","number","numberInt"];return angular.isDefined(e.filter)&&-1!==t.indexOf(e.filter)};var et=["sum","avg"];e.$watch(function(){return _.sorting},function(){c()},!0),e.$watch(function(){return G.filters},function(){N()},!0);var tt=null}return e.$inject=["$scope","$filter","$q","$timeout","$window"],{templateUrl:"ht-table/layout.html",require:"^ngModel",scope:{settings:"=htTable",data:"=ngModel"},controllerAs:"htTable",controller:e}}function t(){return function(e,t){t[0].focus()}}function n(e){return function(t,n){return e("filter")(t,n,function(e,t){return e==t})}}function l(){return function(e){for(var t=[],n=e.length,l=0;n>l;l++)(angular.isUndefined(e[l].visible)||e[l].visible)&&t.push(e[l]);return t}}function a(e){return function(t,n){return e(t,n,function(e,t){var n=function(e){return!isNaN(parseFloat(e))};return n(e)&&n(t)?e>=t:!1})}}function i(e){return function(t,n){return e(t,n,function(e,t){var n=function(e){return!isNaN(parseFloat(e))};return n(e)&&n(t)?t>=e:!1})}}function r(e,t){function n(e){if("function"==typeof e)e=!0;else if(e&&0!==e.length){var t=angular.lowercase(""+e);e=!("f"==t||"0"==t||"false"==t||"no"==t||"n"==t||"[]"==t)}else e=!1;return e}function l(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function a(e,t,n){var l=[];return angular.forEach(e,function(e,a,i){l.push(t.call(n,e,a,i))}),l}function i(e){if(null===e||l(e))return!1;var t=e.length;return 1===e.nodeType&&t?!0:angular.isString(e)||angular.isArray(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}var r=[].slice;return function(l,o,s){function u(e,t){for(var n=0;n<o.length;n++){var l=o[n](e,t);if(0!==l)return l}return 0}function f(e,t){return n(t)?function(t,n){return e(n,t)}:e}function d(e,n){var l=typeof e,a=typeof n;return l==a?(angular.isDate(e)&&angular.isDate(n)&&(e=e.valueOf(),n=n.valueOf()),"string"==l&&(e=t.naturalValue(e.toLowerCase()),n=t.naturalValue(n.toLowerCase())),e===n?0:n>e?-1:1):a>l?-1:1}return i(l)?(o=angular.isArray(o)?o:[o],0===o.length&&(o=["+"]),o=a(o,function(t){var n=!1,l=t||identity;if(angular.isString(t)){if(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),""===t)return f(function(e,t){return d(e,t)},n);if(l=e(t),l.constant){var a=l();return f(function(e,t){return d(e[a],t[a])},n)}}return f(function(e,t){return d(l(e),l(t))},n)}),r.call(l).sort(f(u,s))):l}}function o(e){return{require:"^ngModel",scope:{row:"=ngModel",template:"=htTableTemplate",customScope:"="},controller:["$scope","$element",function(t,n){n.append(e(t.template)(t))}]}}n.$inject=["$filter"],a.$inject=["filterFilter"],i.$inject=["filterFilter"],r.$inject=["$parse","naturalService"],o.$inject=["$compile"],angular.module("ht.tables",["ui.bootstrap","naturalSort","ngSanitize","ngCsv"]).directive("htTable",e).directive("htFocus",t).directive("htTableTemplate",o).filter("greaterThanOrEqualTo",a).filter("lessThanOrEqualTo",i).filter("natural",r).filter("field",l).filter("exact",n)}(),/*!
 * Copyright 2013 Phil DeJarnett - http://www.overzealous.com
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
angular.module("naturalSort",[]).factory("naturalService",["$locale",function(e){"use strict";var t={},n=function(e){return"00000000000000000000".slice(e.length)},l=function(e){return null===e||void 0===e?"":""+e},a="M"===e.DATETIME_FORMATS.shortDate.charAt(0),i=function(e){return l(e).replace(/(\d\d?)[-\/\.](\d\d?)[-\/\.](\d{4})/,function(e,t,n,l){var i=n;return a?Number(t)>12&&(n=t,t=i):Number(n)<13&&(n=t,t=i),l+"-"+t+"-"+n})},r=function(e){return e.replace(/(\d+)((\.\d+)+)?/g,function(e,t,l,a){return l!==a?e.replace(/(\d+)/g,function(e){return n(e)+e}):(l=l||".0",n(t)+t+l+n(l))})},o=function(e){return t[e]?t[e]:(t[e]=r(i(e)),t[e])};return{naturalValue:o,naturalSort:function(e,t){return e=natVale(e),t=o(t),t>e?-1:e>t?1:0}}}]).run(["$rootScope","naturalService",function(e,t){"use strict";e.natural=function(e){return function(n){return t.naturalValue(n[e])}}}]),angular.module("ht.tables").run(["$templateCache",function(e){e.put("ht-table/checkbox.html",'<input type="checkbox" ng-model="row.$htTable.selected" ng-change="table.checkedChange()">'),e.put("ht-table/filters.html",'<div class="form-inline" ng-repeat="filter in htTable.filters"><div class="form-group"><select class="form-control" ng-model="filter.filter" ng-options="filterType.value as filterType.name for filterType in htTable.filterTypes"></select></div><div class="form-group"><select class="form-control" ng-model="filter.field" ng-options="field.field as field.name for field in htTable.filterFields"></select></div><div class="form-group"><input class="form-control" type="text" ng-model="filter.value" ht-focus=""></div><div class="form-group"><span class="glyphicon glyphicon-remove-circle" ng-click="htTable.removeFilter($index)"></span></div></div><button type="button" class="btn btn-default" ng-click="htTable.addFilter()">Dodaj filtr</button><h4 ng-repeat-start="field in htTable.selectFilters">{{field.name}}</h4><div class="btn-group" ng-repeat-end=""><label ng-repeat="option in field.options" class="btn btn-success" ng-change="htTable.updateFilter()" ng-model="option.selected" btn-radio="1" btn-checkbox="">{{option.name}}</label></div>'),e.put("ht-table/header.html",'<tr><th><div dropdown="" class="btn-group option-group-table" is-open="htTable.isOpen"><button class="btn btn-default dropdown-toggle" type="button" dropdown-toggle=""><span class="glyphicon glyphicon-cog" aria-hidden="true"></span></button><ul class="dropdown-menu" role="menu" ng-click="$event.stopPropagation()"><li ng-repeat="field in htTable.fields"><label><input type="checkbox" ng-model="field.visible">{{field.name}}</label></li><button class="btn btn-primary" ng-csv="htTable.export()" csv-header="htTable.exportHeader()" filename="export.csv">Eksportuj do CSV</button> <button class="btn btn-primary" ng-click="htTable.exportToExcel()">Eksportuj do XLS</button></ul></div></th><th ng-if="htTable.selectMultiple()"><input type="checkbox" ng-model="htTable.allSelected" ng-change="htTable.selectAll()"></th><div><th ng-repeat="field in htTable.fields | field" ng-click="htTable.changeSorting(field, $event)" ng-class="htTable.getFieldClass(field)" style="cursor:pointer">{{field.name}}</th></div></tr>'),e.put("ht-table/layout.html",'<div id="ng-table"><div ng-if="htTable.showFilters()" ng-include="\'ht-table/filters.html\'"></div><h4 ng-repeat-start="field in filter.select">{{field.name}}</h4><div class="btn-group" ng-repeat-end=""><label ng-repeat="option in field.options" class="btn btn-success" ng-change="filter.update()" ng-model="option.selected" btn-radio="1" btn-checkbox="">{{option.name}}</label></div><div ng-include="\'ht-table/table.html\'"></div></div>'),e.put("ht-table/pagination.html",'<div class="col-xs-6"><pagination boundary-links="true" ng-if="htTable.pagination.itemsPerPage <= htTable.pagination.total && htTable.pagination.itemsPerPage != 0" total-items="htTable.pagination.total" ng-model="htTable.pagination.current" ng-change="htTable.updatePagination()" max-size="5" items-per-page="htTable.pagination.itemsPerPage" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div><div class="btn-group col-xs-6" ng-if="htTable.pagination.total > 10"><label class="btn btn-primary" ng-model="htTable.pagination.itemsPerPage" ng-change="htTable.updatePagination()" btn-radio="10">10</label> <label class="btn btn-primary" ng-model="htTable.pagination.itemsPerPage" ng-change="htTable.updatePagination()" btn-radio="25">25</label> <label class="btn btn-primary" ng-if="htTable.pagination.total > 25" ng-change="htTable.updatePagination()" ng-model="htTable.pagination.itemsPerPage" btn-radio="50">50</label> <label class="btn btn-primary" ng-if="htTable.pagination.total > 50" ng-change="htTable.updatePagination()" ng-model="htTable.pagination.itemsPerPage" btn-radio="100">100</label> <label class="btn btn-primary" ng-model="htTable.pagination.itemsPerPage" ng-change="htTable.updatePagination()" btn-radio="0">Wszystkie</label></div>'),e.put("ht-table/table.html",'<div id="exportable{{htTable.settings.id}}"><div ng-class="{\'table-responsive\': !htTable.isOpen}" style="padding-bottom: 50px"><table class="table table-bordered" id="{{htTable.settings.id}}" ng-class="table.class"><thead ng-include="\'ht-table/header.html\'"></thead><tbody><tr ng-repeat-start="row in htTable.data" ng-class="htTable.rowStyle(row)"><td>{{ htTable.getIndex() + $index + 1 }}.</td><th scope="row" ng-if="htTable.selectMultiple()" ng-include="\'ht-table/checkbox.html\'"></th><td ng-repeat="field in htTable.fields | field" ng-click="htTable.expand(row)"><div ng-if="field.template" ht-table-template="field.template" custom-scope="htTable.customScope" ng-model="row"></div><div ng-if="!field.templateUrl && !field.template" ng-class="{\'row-number\': htTable.isNumber(field)}">{{htTable.getValue(field, row)}}</div><div ng-if="field.templateUrl" ng-click="$event.stopPropagation()" ng-include="field.templateUrl" onload="customScope = htTable.customScope"></div></td></tr><tr ng-repeat-end="" ng-if="htTable.expanded == row" class="option-expand"><td colspan="{{htTable.countColumns()}}"><div ui-view=""></div></td></tr></tbody><tfoot ng-if="htTable.hasSum()" class="option-footer"><tr><td>&nbsp;</td><td ng-if="htTable.selectMultiple()">&nbsp;</td><td ng-repeat="field in htTable.fields | field"><span ng-if="field.type && (field.type == \'sum\' || field.type.indexOf(\'sum\') !== -1)">Suma: {{htTable.sum(field)}}<br></span> <span ng-if="field.type && (field.type == \'avg\' || field.type.indexOf(\'avg\') !== -1)">Średnia: {{htTable.avg(field)}}</span></td></tr></tfoot></table></div><div class="row option-pagination" ng-include="\'ht-table/pagination.html\'" ng-if="htTable.showPagination()"></div></div>')}]);